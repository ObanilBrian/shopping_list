!function(e,n,i,t){"use strict";n=void 0!==n&&n.Math==Math?n:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.modal=function(o){var a,r=e(this),s=e(n),c=e(i),l=e("body"),d=r.selector||"",u=(new Date).getTime(),m=[],f=arguments[0],g="string"==typeof f,h=[].slice.call(arguments,1),v=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame||function(e){setTimeout(e,0)};return r.each(function(){var r,b,p,y,k,w,M,C,S,H=e.isPlainObject(o)?e.extend(!0,{},e.fn.modal.settings,o):e.extend({},e.fn.modal.settings),F=H.selector,T=H.className,A=H.namespace,D=H.error,x="."+A,O="module-"+A,z=e(this),q=e(H.context),E=z.find(F.close),j=this,P=z.data(O),R=!1;S={initialize:function(){S.verbose("Initializing dimmer",q),S.create.id(),S.create.dimmer(),S.refreshModals(),S.bind.events(),H.observeChanges&&S.observeChanges(),S.instantiate()},instantiate:function(){S.verbose("Storing instance of modal"),P=S,z.data(O,P)},create:{dimmer:function(){var n={debug:H.debug,dimmerName:"modals",duration:{show:H.duration,hide:H.duration}},i=e.extend(!0,n,H.dimmerSettings);H.inverted&&(i.variation=i.variation!==t?i.variation+" inverted":"inverted"),e.fn.dimmer!==t?(S.debug("Creating dimmer with settings",i),y=q.dimmer(i),H.detachable?(S.verbose("Modal is detachable, moving content into dimmer"),y.dimmer("add content",z)):S.set.undetached(),H.blurring&&y.addClass(T.blurring),k=y.dimmer("get dimmer")):S.error(D.dimmer)},id:function(){M=(Math.random().toString(16)+"000000000").substr(2,8),w="."+M,S.verbose("Creating unique id for element",M)}},destroy:function(){S.verbose("Destroying previous modal"),z.removeData(O).off(x),s.off(w),k.off(w),E.off(x),q.dimmer("destroy")},observeChanges:function(){"MutationObserver"in n&&((C=new MutationObserver(function(e){S.debug("DOM tree modified, refreshing"),S.refresh()})).observe(j,{childList:!0,subtree:!0}),S.debug("Setting up mutation observer",C))},refresh:function(){S.remove.scrolling(),S.cacheSizes(),S.set.screenHeight(),S.set.type(),S.set.position()},refreshModals:function(){b=z.siblings(F.modal),r=b.add(z)},attachEvents:function(n,i){var t=e(n);i=e.isFunction(S[i])?S[i]:S.toggle,t.length>0?(S.debug("Attaching modal events to element",n,i),t.off(x).on("click"+x,i)):S.error(D.notFound,n)},bind:{events:function(){S.verbose("Attaching events"),z.on("click"+x,F.close,S.event.close).on("click"+x,F.approve,S.event.approve).on("click"+x,F.deny,S.event.deny),s.on("resize"+w,S.event.resize)}},get:{id:function(){return(Math.random().toString(16)+"000000000").substr(2,8)}},event:{approve:function(){R||!1===H.onApprove.call(j,e(this))?S.verbose("Approve callback returned false cancelling hide"):(R=!0,S.hide(function(){R=!1}))},deny:function(){R||!1===H.onDeny.call(j,e(this))?S.verbose("Deny callback returned false cancelling hide"):(R=!0,S.hide(function(){R=!1}))},close:function(){S.hide()},click:function(n){var t=e(n.target).closest(F.modal).length>0,o=e.contains(i.documentElement,n.target);!t&&o&&(S.debug("Dimmer clicked, hiding all modals"),S.is.active()&&(S.remove.clickaway(),H.allowMultiple?S.hide():S.hideAll()))},debounce:function(e,n){clearTimeout(S.timer),S.timer=setTimeout(e,n)},keyboard:function(e){27==e.which&&(H.closable?(S.debug("Escape key pressed hiding modal"),S.hide()):S.debug("Escape key pressed, but closable is set to false"),e.preventDefault())},resize:function(){y.dimmer("is active")&&v(S.refresh)}},toggle:function(){S.is.active()||S.is.animating()?S.hide():S.show()},show:function(n){n=e.isFunction(n)?n:function(){},S.refreshModals(),S.showModal(n)},hide:function(n){n=e.isFunction(n)?n:function(){},S.refreshModals(),S.hideModal(n)},showModal:function(n){n=e.isFunction(n)?n:function(){},S.is.animating()||!S.is.active()?(S.showDimmer(),S.cacheSizes(),S.set.position(),S.set.screenHeight(),S.set.type(),S.set.clickaway(),!H.allowMultiple&&S.others.active()?S.hideOthers(S.showModal):(H.allowMultiple&&H.detachable&&z.detach().appendTo(k),H.onShow.call(j),H.transition&&e.fn.transition!==t&&z.transition("is supported")?(S.debug("Showing modal with css animations"),z.transition({debug:H.debug,animation:H.transition+" in",queue:H.queue,duration:H.duration,useFailSafe:!0,onComplete:function(){H.onVisible.apply(j),H.keyboardShortcuts&&S.add.keyboardShortcuts(),S.save.focus(),S.set.active(),H.autofocus&&S.set.autofocus(),n()}})):S.error(D.noTransition))):S.debug("Modal is already visible")},hideModal:function(n,i){n=e.isFunction(n)?n:function(){},S.debug("Hiding modal"),!1!==H.onHide.call(j,e(this))?(S.is.animating()||S.is.active())&&(H.transition&&e.fn.transition!==t&&z.transition("is supported")?(S.remove.active(),z.transition({debug:H.debug,animation:H.transition+" out",queue:H.queue,duration:H.duration,useFailSafe:!0,onStart:function(){S.others.active()||i||S.hideDimmer(),H.keyboardShortcuts&&S.remove.keyboardShortcuts()},onComplete:function(){H.onHidden.call(j),S.restore.focus(),n()}})):S.error(D.noTransition)):S.verbose("Hide callback returned false cancelling hide")},showDimmer:function(){y.dimmer("is animating")||!y.dimmer("is active")?(S.debug("Showing dimmer"),y.dimmer("show")):S.debug("Dimmer already visible")},hideDimmer:function(){y.dimmer("is animating")||y.dimmer("is active")?y.dimmer("hide",function(){S.remove.clickaway(),S.remove.screenHeight()}):S.debug("Dimmer is not visible cannot hide")},hideAll:function(n){var i=r.filter("."+T.active+", ."+T.animating);n=e.isFunction(n)?n:function(){},i.length>0&&(S.debug("Hiding all visible modals"),S.hideDimmer(),i.modal("hide modal",n))},hideOthers:function(n){var i=b.filter("."+T.active+", ."+T.animating);n=e.isFunction(n)?n:function(){},i.length>0&&(S.debug("Hiding other modals",b),i.modal("hide modal",n,!0))},others:{active:function(){return b.filter("."+T.active).length>0},animating:function(){return b.filter("."+T.animating).length>0}},add:{keyboardShortcuts:function(){S.verbose("Adding keyboard shortcuts"),c.on("keyup"+x,S.event.keyboard)}},save:{focus:function(){p=e(i.activeElement).blur()}},restore:{focus:function(){p&&p.length>0&&p.focus()}},remove:{active:function(){z.removeClass(T.active)},clickaway:function(){H.closable&&k.off("click"+w)},bodyStyle:function(){""===l.attr("style")&&(S.verbose("Removing style attribute"),l.removeAttr("style"))},screenHeight:function(){S.debug("Removing page height"),l.css("height","")},keyboardShortcuts:function(){S.verbose("Removing keyboard shortcuts"),c.off("keyup"+x)},scrolling:function(){y.removeClass(T.scrolling),z.removeClass(T.scrolling)}},cacheSizes:function(){z.addClass(T.loading);var o=z.prop("scrollHeight"),a=z.outerHeight();S.cache!==t&&0===a||(S.cache={pageHeight:e(i).outerHeight(),height:a+H.offset,scrollHeight:o+H.offset,contextHeight:"body"==H.context?e(n).height():y.height()},S.cache.topOffset=-S.cache.height/2),z.removeClass(T.loading),S.debug("Caching modal and container sizes",S.cache)},can:{fit:function(){var e=S.cache.contextHeight,n=S.cache.contextHeight/2,i=S.cache.topOffset,t=S.cache.scrollHeight,o=S.cache.height,a=H.padding;return t>o?n+i+t+a<e:o+2*a<e}},is:{active:function(){return z.hasClass(T.active)},animating:function(){return z.transition("is supported")?z.transition("is animating"):z.is(":visible")},scrolling:function(){return y.hasClass(T.scrolling)},modernBrowser:function(){return!(n.ActiveXObject||"ActiveXObject"in n)}},set:{autofocus:function(){var e=z.find("[tabindex], :input").filter(":visible"),n=e.filter("[autofocus]"),i=n.length>0?n.first():e.first();i.length>0&&i.focus()},clickaway:function(){H.closable&&k.on("click"+w,S.event.click)},screenHeight:function(){S.can.fit()?l.css("height",""):(S.debug("Modal is taller than page content, resizing page height"),l.css("height",S.cache.height+2*H.padding))},active:function(){z.addClass(T.active)},scrolling:function(){y.addClass(T.scrolling),z.addClass(T.scrolling)},type:function(){S.can.fit()?(S.verbose("Modal fits on screen"),S.others.active()||S.others.animating()||S.remove.scrolling()):(S.verbose("Modal cannot fit on screen setting to scrolling"),S.set.scrolling())},position:function(){S.verbose("Centering modal on page",S.cache),S.can.fit()?z.css({top:"",marginTop:S.cache.topOffset}):z.css({marginTop:"",top:c.scrollTop()})},undetached:function(){y.addClass(T.undetached)}},setting:function(n,i){if(S.debug("Changing setting",n,i),e.isPlainObject(n))e.extend(!0,H,n);else{if(i===t)return H[n];e.isPlainObject(H[n])?e.extend(!0,H[n],i):H[n]=i}},internal:function(n,i){if(e.isPlainObject(n))e.extend(!0,S,n);else{if(i===t)return S[n];S[n]=i}},debug:function(){!H.silent&&H.debug&&(H.performance?S.performance.log(arguments):(S.debug=Function.prototype.bind.call(console.info,console,H.name+":"),S.debug.apply(console,arguments)))},verbose:function(){!H.silent&&H.verbose&&H.debug&&(H.performance?S.performance.log(arguments):(S.verbose=Function.prototype.bind.call(console.info,console,H.name+":"),S.verbose.apply(console,arguments)))},error:function(){H.silent||(S.error=Function.prototype.bind.call(console.error,console,H.name+":"),S.error.apply(console,arguments))},performance:{log:function(e){var n,i;H.performance&&(i=(n=(new Date).getTime())-(u||n),u=n,m.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:j,"Execution Time":i})),clearTimeout(S.performance.timer),S.performance.timer=setTimeout(S.performance.display,500)},display:function(){var n=H.name+":",i=0;u=!1,clearTimeout(S.performance.timer),e.each(m,function(e,n){i+=n["Execution Time"]}),n+=" "+i+"ms",d&&(n+=" '"+d+"'"),(console.group!==t||console.table!==t)&&m.length>0&&(console.groupCollapsed(n),console.table?console.table(m):e.each(m,function(e,n){console.log(n.Name+": "+n["Execution Time"]+"ms")}),console.groupEnd()),m=[]}},invoke:function(n,i,o){var r,s,c,l=P;return i=i||h,o=j||o,"string"==typeof n&&l!==t&&(n=n.split(/[\. ]/),r=n.length-1,e.each(n,function(i,o){var a=i!=r?o+n[i+1].charAt(0).toUpperCase()+n[i+1].slice(1):n;if(e.isPlainObject(l[a])&&i!=r)l=l[a];else{if(l[a]!==t)return s=l[a],!1;if(!e.isPlainObject(l[o])||i==r)return l[o]!==t&&(s=l[o],!1);l=l[o]}})),e.isFunction(s)?c=s.apply(o,i):s!==t&&(c=s),e.isArray(a)?a.push(c):a!==t?a=[a,c]:c!==t&&(a=c),s}},g?(P===t&&S.initialize(),S.invoke(f)):(P!==t&&P.invoke("destroy"),S.initialize())}),a!==t?a:this},e.fn.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",inverted:"inverted",loading:"loading",scrolling:"scrolling",undetached:"undetached"}}}(jQuery,window,document);